!function(v){CartFlowsHelper={getUrlParameter:function(e){var t,a,r=decodeURIComponent(window.location.search.substring(1)).split("&");for(a=0;a<r.length;a++)if((t=r[a].split("="))[0]===e)return void 0===t[1]||t[1]}};function y(e){e._nonce=cartflows_offer[e.action+"_nonce"],v.ajax({url:cartflows.ajax_url,data:e,dataType:"json",type:"POST",success:function(e){var t=e.message,a="wcf-payment-"+e.status;v("body").trigger("wcf-update-msg",[t,a]),setTimeout(function(){window.location.href=e.redirect},500)}})}function e(){var e=jQuery(".woocommerce-product-gallery");if(0<e.length&&1<e.find(".woocommerce-product-gallery__image").length){var t=jQuery(".woocommerce-product-gallery").flexslider({animation:"slide",animationLoop:!1,controlNav:"thumbnails",selector:".slides .woocommerce-product-gallery__image",directionNav:!1});v(window).on("load",function(){t.trigger("resize")});var f=v(".variations_form");if(0<f.length){function a(e){var t=f,a=v(".woocommerce-product-gallery"),r=a.find(".flex-control-nav"),o=r.find("li:eq(0) img"),i=a.find(".woocommerce-product-gallery__image, .woocommerce-product-gallery__image--placeholder").eq(0),c=i.find(".wp-post-image"),n=i.find("a").eq(0);if(e&&e.image&&e.image.src&&1<e.image.src.length){0<r.find('li img[data-o_src="'+e.image.gallery_thumbnail_src+'"]').length&&s();var _=r.find('li img[src="'+e.image.gallery_thumbnail_src+'"]');if(0<_.length)return _.trigger("click"),t.attr("current-image",e.image_id),void window.setTimeout(function(){v(window).trigger("resize"),a.trigger("woocommerce_gallery_init_zoom")},20);c.wc_set_variation_attr("src",e.image.src),c.wc_set_variation_attr("height",e.image.src_h),c.wc_set_variation_attr("width",e.image.src_w),c.wc_set_variation_attr("srcset",e.image.srcset),c.wc_set_variation_attr("sizes",e.image.sizes),c.wc_set_variation_attr("title",e.image.title),c.wc_set_variation_attr("data-caption",e.image.caption),c.wc_set_variation_attr("alt",e.image.alt),c.wc_set_variation_attr("data-src",e.image.full_src),c.wc_set_variation_attr("data-large_image",e.image.full_src),c.wc_set_variation_attr("data-large_image_width",e.image.full_src_w),c.wc_set_variation_attr("data-large_image_height",e.image.full_src_h),i.wc_set_variation_attr("data-thumb",e.image.src),o.wc_set_variation_attr("src",e.image.gallery_thumbnail_src),n.wc_set_variation_attr("href",e.image.full_src)}else s();window.setTimeout(function(){v(window).trigger("resize"),function(e){var t=f,a=v(".woocommerce-product-gallery"),r=!1,o=e&&e.image_id?e.image_id:"";t.attr("current-image")!==o&&(r=!0),t.attr("current-image",o),r&&a.flexslider(0)}(e)},20)}var s=function(){var e=v(".woocommerce-product-gallery"),t=e.find(".flex-control-nav").find("li:eq(0) img"),a=e.find(".woocommerce-product-gallery__image, .woocommerce-product-gallery__image--placeholder").eq(0),r=a.find(".wp-post-image"),o=a.find("a").eq(0);r.wc_reset_variation_attr("src"),r.wc_reset_variation_attr("width"),r.wc_reset_variation_attr("height"),r.wc_reset_variation_attr("srcset"),r.wc_reset_variation_attr("sizes"),r.wc_reset_variation_attr("title"),r.wc_reset_variation_attr("data-caption"),r.wc_reset_variation_attr("alt"),r.wc_reset_variation_attr("data-src"),r.wc_reset_variation_attr("data-large_image"),r.wc_reset_variation_attr("data-large_image_width"),r.wc_reset_variation_attr("data-large_image_height"),a.wc_reset_variation_attr("data-thumb"),t.wc_reset_variation_attr("src"),o.wc_reset_variation_attr("href")};v(".variations_form").on("found_variation",function(e,t){a(t)})}}}var h=function(t,e){"mollie_wc_gateway_creditcard"===e&&(t.action="wcf_mollie_creditcard_process",t._nonce=cartflows_offer.wcf_mollie_creditcard_process_nonce),"mollie_wc_gateway_ideal"===e&&(t.action="wcf_mollie_ideal_process",t._nonce=cartflows_offer.wcf_mollie_ideal_process_nonce),v.ajax({url:cartflows.ajax_url,data:t,dataType:"json",type:"POST",success:function(e){"success"===e.result?window.location.href=e.redirect:(t.action=action,y(t))}})};v(window).on("elementor/frontend/init",function(){elementorFrontend.hooks.addAction("frontend/element_ready/offer-product-image.default",e)});function o(){0<v(".wcf-offer-product-quantity").length&&v(".wcf-offer-product-quantity .qty").on("change",function(){var e=v(this).val();v(".wcf-offer-product-quantity .qty").val(e)}),0<v(".wcf-offer-product-variation .variations select").length?(v(".wcf-variable-price-range").show().siblings().remove(),v(".wcf-offer-product-variation .variations select").on("change",function(){v(".wcf-offer-product-variation").find(".variations_form");var e=v(this),t=e.data("attribute_name");if(0!=e.length){var a=e.val();v('.wcf-offer-product-variation [data-attribute_name ="'+t+'"]').each(function(){v(this).val(a),""==a||0==a?v(this).addClass("var_not_selected"):v(this).removeClass("var_not_selected")})}}),v(".variations_form").on("found_variation",function(e,t){var a=cartflows_offer.discount_type,r=cartflows_offer.discount_value,o=cartflows_offer.currency_symbol,i=t.display_price,c=t.display_price;0<r&&("discount_percent"===a?c-=c*r/100:"discount_price"===a&&(c-=r));var n='<span class="wcf-single-variation-price">';i!==c?(n+='<span class="wcf-regular-price del">',n+=o+i.toFixed(2),n+="</span>",n+='<span class="wcf-discount-price">',n+=o+c.toFixed(2)):(n+='<span class="wcf-regular-price">',n+=o+i.toFixed(2)),n+="</span>",n+="</span>",v(".wcf-offer-price").html(n)})):(v(".wcf-variable-price-range").remove(),v(".wcf-offer-price-inner").show()),e()}v(function(r){if(r("body").on("wcf-show-loader",function(e,t){"no"===t&&(jQuery(".wcf-note-yes").hide(),jQuery(".wcf-note-no").show(),jQuery(".wcf-process-msg").hide()),r(".wcf-loader-bg").addClass("show")}),r("body").on("wcf-hide-loader",function(e){r(".wcf-loader-bg").removeClass("show")}),r("body").on("wcf-update-msg",function(e,t,a){r(".wcf-order-msg .wcf-process-msg").text(t).addClass(a).show()}),v('a[href*="wcf-up-offer-yes"]').each(function(e){var t=v(this);0===e?t.attr("id","wcf-upsell-offer"):t.attr("id","wcf-upsell-offer-"+e)}),v('a[href*="wcf-down-offer-yes"]').each(function(e){var t=v(this);0===e?t.attr("id","wcf-downsell-offer"):t.attr("id","wcf-downsell-offer-"+e)}),v(document).on("click",'a[href*="wcf-up-offer"], a[href*="wcf-down-offer"]',function(e){e.preventDefault();var t=v(this).attr("href"),a="yes",r="upsell",o=cartflows_offer.step_id,i=cartflows_offer.product_id,c=cartflows_offer.order_id,n=cartflows_offer.order_key,_=0,f=0,s=cartflows.current_flow;if(-1!==t.indexOf("wcf-up-offer")&&(r="upsell",a=-1!==t.indexOf("wcf-up-offer-yes")?"yes":"no"),-1!==t.indexOf("wcf-down-offer")&&(r="downsell",a=-1!==t.indexOf("wcf-down-offer-yes")?"yes":"no"),"yes"===a){var d=v(".wcf-offer-product-variation");if(0<d.length){var l=d.find(".variations_form"),w=l.find("input.variation_id");if(_=parseInt(w.val()),0<v(".var_not_selected").length||""===_||0===_)return l.find(".variations select").each(function(){0==v(this).val().length&&v(this).addClass("var_not_selected")}),v([document.documentElement,document.body]).animate({scrollTop:l.find(".variations select").offset().top-100},1e3),!1}}if("yes"!==cartflows_offer.skip_offer||"yes"!==a){v("body").trigger("wcf-show-loader",a),action="yes"===a?"wcf_"+r+"_accepted":"wcf_"+r+"_rejected";var m=v(".wcf-offer-product-quantity");if(0<m.length){var p=m.find('input[name="quantity"]'),u=parseInt(p.val());0<u&&(f=u)}var g={action:"",offer_action:a,offer_type:r,step_id:o,product_id:i,variation_id:_,input_qty:f,order_id:c,order_key:n,flow_id:s,stripe_sca_payment:!1,stripe_intent_id:"",_nonce:""};return"yes"===a?"stripe"===cartflows_offer.payment_method?(g.action="wcf_stripe_sca_check",g._nonce=cartflows_offer.wcf_stripe_sca_check_nonce,v.ajax({url:cartflows.ajax_url,data:g,dataType:"json",type:"POST",success:function(e){e.hasOwnProperty("intent_secret")?Stripe(e.stripe_pk).handleCardPayment(e.intent_secret).then(function(e){if(e.error)throw e.error;"requires_capture"!==e.paymentIntent.status&&"succeeded"!==e.paymentIntent.status||(g.action=action,g.stripe_sca_payment=!0,g.stripe_intent_id=e.paymentIntent.id,y(g))}).catch(function(e){window.location.reload()}):(g.action=action,y(g))}})):"mollie_wc_gateway_creditcard"===cartflows_offer.payment_method||"mollie_wc_gateway_ideal"===cartflows_offer.payment_method?h(g,cartflows_offer.payment_method):(g.action=action,y(g)):(g.action=action,y(g)),!1}}),o(),"1"!==cartflows.is_pb_preview&&(jQuery(document).ajaxComplete(function(e,t,a){if(t.hasOwnProperty("responseJSON")){var r=t.responseJSON.hasOwnProperty("fragments")?t.responseJSON.fragments:null;r&&r.hasOwnProperty("added_to_cart_data")&&fbq("track","AddToCart",r.added_to_cart_data.added_to_cart)}}),jQuery(document).ajaxComplete(function(e,t,a){if(t.hasOwnProperty("responseJSON")){var r=cartflows.wcf_ga_active.google_analytics_id,o=cartflows.wcf_ga_active.enable_add_to_cart;if(cartflows.is_checkout_page&&"enable"===o){var i=t.responseJSON.hasOwnProperty("fragments")?t.responseJSON.fragments:null;if(a.hasOwnProperty("data")&&-1!==a.data.indexOf("action=wcf_bump_order_process")){if(i&&i.hasOwnProperty("ga_added_to_cart_data")){var c={send_to:r,event_category:"ecommerce",items:[i.ga_added_to_cart_data.add_to_cart],non_interaction:!0};gtag("event","add_to_cart",c)}i&&i.hasOwnProperty("ga_remove_to_cart_data")&&(c={send_to:r,event_category:"ecommerce",items:[i.ga_remove_to_cart_data.remove_from_cart],non_interaction:!0},gtag("event","remove_from_cart",c))}}}})),"undefined"!=typeof cartflows_offer){var e="";if(CartFlowsHelper.getUrlParameter("wcf-mollie-return")){"mollie_wc_gateway_creditcard"===cartflows_offer.payment_method&&(e=cartflows_offer.wcf_mollie_creditcard_process_nonce),"mollie_wc_gateway_ideal"===cartflows_offer.payment_method&&(e=cartflows_offer.wcf_mollie_ideal_process_nonce);var t=cartflows_offer.offer_type,a={action:"wcf_"+t+"_accepted",offer_action:"yes",offer_type:t,step_id:cartflows_offer.step_id,product_id:cartflows_offer.product_id,order_id:cartflows_offer.order_id,order_key:cartflows_offer.order_key,flow_id:cartflows.current_flow,stripe_sca_payment:!1,stripe_intent_id:"",_nonce:e};y(a)}}})}(jQuery);